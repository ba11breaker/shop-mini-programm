<!--pages/cart/index.wxml-->
<view class="header" style="background-color:{{colors.primary}}">
  <view>购物车</view>
  <view class="admin-button" bindtap="onClickAdmin" data-id="{{mode}}"><text wx:if="{{mode=='normal'}}">管理</text><text wx:if="{{mode=='admin'}}">完成</text></view>
</view>
<view class="cart-container">
  <view class="no-data" wx:if="{{cart.length==0}}">
    <image src="/images/cart/empty.png"></image>
  </view>
  <view class="no-data text" wx:if="{{cart.length==0}}">
    <view>购物车为空</view>
  </view>

  <view class="goods-container" wx:if="cart.length>0" wx:for="{{cartGoods}}" wx:key="id" wx:item="{{item}}">
    <view class="good">
      <view class="select-button">
        <image wx:if="{{mode=='admin'}}" src="/images/cart/delete.png" bindtap="deleteGood" data-id="{{item.id}}"></image>
        <image wx:if="{{mode=='normal'&&item.selected}}" src="/images/cart/selected.png" bindtap="releaseGood" data-id="{{item.id}}"></image>
        <image wx:if="{{mode=='normal'&&!item.selected}}" src="/images/cart/notSelected.png" bindtap="selectGood" data-id="{{item.id}}"></image>
      </view>
      <view class="pic">
        <image src="{{item.images}}"></image>
      </view>
      <view class="good-info">
        <view class="title">{{item.name}}</view>
        <view class="good-bar">
          <view class="price">
            <text class="price1">${{item.price[0]}}</text>
            <text class="price2">(约￥{{item.price[1]}})</text>
          </view>
          <view class="amount">
            <view bindtap="addOne" data-id="{{index}}"><image src="/images/cart/puls.png"></image></view>
            <input value="{{cart[index][1]}}" type="number" bindinput="inputAmount" data-id="{{index}}" ></input>
            <view bindtap="minusOne" data-id="{{index}}"><image src="/images/cart/minus.png"></image></view>
          </view>
        </view>
      </view>
    </view>
  </view>
</view>

<view class="recommend-container">
  <view class="header">
    <image src="/images/cart/heart.png"></image>
    <text>猜你喜欢</text>
  </view>
  <view class="goods">
    <view class="good-box" wx:for="{{recommends}}" wx:key="id" wx:item="item">
      <view class="pic" bindtap="goGoodDetail" data-id="{{item.id}}"><image src="{{item.images}}"></image></view>
      <view class="good-title" bindtap="goGoodDetail" data-id="{{item.id}}"><view>{{item.name}}</view></view>
      <view class="good-bar">
        <view class="price">
          <text class="price1">${{item.price[0]}}</text>
          <text class="price2">(￥约{{item.price[1]}})</text>
        </view>
        <view class="icon"><image src="/images/goodslist/cart.png" bindtap="addCart" data-id="{{item.id}}"></image></view>
      </view>
    </view>
  </view>
</view>

<view class="footer-box">
  <view class="bar">
    <view class="select-button">
      <image wx:if="{{allSelected}}" src="/images/cart/selected.png" bindtap="releaseAll"></image>
      <image wx:if="{{!allSelected}}" src="/images/cart/notSelected.png" bindtap="selectAll"></image>
      <text>全选</text>
    </view>
    <view class="price-bar">
      <view class="title">合计(不包含运费):</view>
      <view class="price">
        <text class="price1">AU${{totalPrice.aud}}</text>
        <text class="price2">(约￥{{totalPrice.rmb}})</text>
      </view>
    </view>
  </view>
  <view class="submit-button">
    <view class="button" style="background-color:{{colors.darkPrimary}}" bindtap="payNow"><text>结算</text></view>
  </view>
</view>